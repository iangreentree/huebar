var huebar=huebar||{};var jambo=jambo||{};huebar={options:{},mouseDown:false,boundaryId:"huebar-boundary",pickerId:"huebar-picker",rgb:[255,255,255],hue:0,swiperHeight:100,swiperWidth:100,init:function(e){this.options=e;this.initDefaultOptions();this.displaySwipe();this.initEvents()},initDefaultOptions:function(){this.options.container=this.options.container||"swipeContainer";this.options.showBorder=this.options.showBorder||true;this.options.whiteHeight=this.options.whiteHeight||10;this.options.blackHeight=this.options.blackHeight||10;this.options.showBorder=this.options.showBorder||true;this.options.mouseUpCallback=this.options.mouseUpCallback||function(){return};this.swiperHeight=this.options.height||100;this.swiperWidth=this.options.width||100},displaySwipe:function(){var e=document.createElement("div");e.style.position="absolute";e.style.border="1px solid #555";e.style.top="3px";e.style.left="-6px";e.style.width=this.swiperWidth+10+"px";e.style.height="1px";e.style.background="#fff";e.id=this.pickerId;var t=document.createElement("div");t.style.position="relative";t.style.top="11px";t.style.left="12px";t.style.width=this.swiperWidth+"px";t.style.height=this.swiperHeight+"px";t.style.background="red";t.style.cursor="pointer";if(this.options.showBorder){t.style.border="1px solid #000"}t.id=this.boundaryId;t.appendChild(e);var n=document.getElementById(this.options.container);n.appendChild(t)},initEvents:function(){var e=this;var t=document.getElementById(this.boundaryId);t.onmousedown=function(t){e.mouseDown=true;var n=e.mouseYPosition(t);e.processEvent(n)};t.onmousemove=function(t){if(e.mouseDown===false){return}var n=e.mouseYPosition(t);e.processEvent(n)};document.onmouseup=function(){if(e.mouseDown===true){e.options.mouseUpCallback()}e.mouseDown=false}},processEvent:function(e){this.movePicker(e);this.calculateHue(e);this.displayHue()},mouseYPosition:function(e){var t=document.all?true:false;var n;if(!t){n=e.pageY}if(t){n=event.clientY+document.body.scrollTop}var r=document.getElementById(this.boundaryId).offsetTop;console.log("mouseYPosition",r,n);return n-r},movePicker:function(e){var t=document.getElementById(this.pickerId);t.style.top=e+"px"},calculateHue:function(e){var t=255;var n=255;if(e<this.options.blackHeight){this.hue=0;t=0;n=0}else if(e>this.swiperHeight-this.options.whiteHeight){this.hue=360}else{var r=this.swiperHeight-(this.options.whiteHeight+this.options.blackHeight);var i=(e-this.options.blackHeight)/r*100;this.hue=360/100*i}console.log("ggg",r,i,this.options.whiteHeight,this.options.blackHeight,e);if(this.hue>360){this.hue=360}if(this.hue<0){this.hue=0}var s=0,o=0,u=0;var a=n;var f=(255-t)*n/255;var l=(a-f)*(this.hue%60)/60;if(this.hue<60){s=a;o=f+l;u=f}else if(this.hue<120){s=a-l;o=a;u=f}else if(this.hue<180){s=f;o=a;u=f+l}else if(this.hue<240){s=f;o=a-l;u=a}else if(this.hue<300){s=f+l;o=f;u=a}else if(this.hue<360){s=a;o=f;u=a-l}else{s=255;o=255;u=255}this.rgb=[Math.round(s),Math.round(o),Math.round(u)]},rgbToHue:function(e){if(e[0]==0&&e[1]==0&&e[2]==0){return-.1}if(e[0]==255&&e[1]==255&&e[2]==255){return 1.1}var t=Math.min(e[0],e[1],e[2]);var n=Math.max(e[0],e[1],e[2]);var r=n-t;var i=0;var s=0;var o=(n+t)/2;if(r==0){i=0;s=0}else{if(o<.5){s=r/(n+t)}else{s=r/(2-n-t)}var u=((n-e[0])/6+n/2)/n;var a=((n-e[1])/6+n/2)/n;var f=((n-e[2])/6+n/2)/n;if(e[0]==n){i=f-a}else if(e[1]==n){i=1/3+u-f}else if(e[2]==n){i=2/3+a-u}if(i<0){i+=1}if(i>1){i-=1}}return i},displayHue:function(){var e=document.getElementById(this.boundaryId);e.style.background="rgb("+this.rgb[0]+","+this.rgb[1]+","+this.rgb[2]+")"},displayRGB:function(){var e=this.rgbToHue(this.rgb);var t;if(e==-.1){t=15}else if(e==1.1){t=231}else{t=Math.floor(e*this.swiperHeight)+30;this.hue=Math.round(e*360)}this.processEvent(t);return t},paintElement:function(e){document.getElementById(e).style.background="rgb("+this.rgb[0]+","+this.rgb[1]+","+this.rgb[2]+")"},cssRGB:function(){return"rgb("+this.rgb[0]+","+this.rgb[1]+","+this.rgb[2]+")"},RGBObject:function(){return{red:this.rgb[0],green:this.rgb[1],blue:this.rgb[2]}}}